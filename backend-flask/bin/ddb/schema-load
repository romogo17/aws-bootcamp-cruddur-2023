#!/usr/bin/env python3

import boto3
import sys
import argparse

parser = argparse.ArgumentParser()
parser.add_argument("--prod", default=False, action='store_true')
args = parser.parse_args()
attrs = {} if args.prod == True else { 'endpoint_url': 'http://localhost:8000' }

ddb = boto3.client('dynamodb', **attrs)

table_name = 'cruddur-messages'

response = ddb.create_table(
    TableName=table_name,
    AttributeDefinitions=[
    {
        'AttributeName': 'pk',
        'AttributeType': 'S'
    },
    {
        'AttributeName': 'sk',
        'AttributeType': 'S'
    },
    ],
    KeySchema=[
    {
        'AttributeName': 'pk',
        'KeyType': 'HASH'
    },
    {
        'AttributeName': 'sk',
        'KeyType': 'RANGE'
    },
    ],
    # GlobalSecondaryIndexes=[],
    BillingMode='PROVISIONED',
    ProvisionedThroughput={
        'ReadCapacityUnits': 5,
        'WriteCapacityUnits': 5
    }
)

print(response)